<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
<title>libkate: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.0 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<p>This page documents the Kate bitstream format.</p>
<h2><a class="anchor" id="format-overview">
Overview</a></h2>
<p>The Kate bitstream format consists of a number of sequential packets. Packets can be either header packets or data packets. All header packets must appear before any data packet.</p>
<p>Header packets must appear in order. Decoding of a data packet is not possible until all header packets have been decoded.</p>
<p>Each Kate packet starts with a one byte type. A type with the MSB set (eg, between 0x80 and 0xff) indicates a header packet, while a type with the MSB cleared (eg, between 0x00 and 0x7f) indicates a data packet. All header packets then have the Kate magic, from byte offset 1 to byte offset 7 ("kate\0\0\0").</p>
<p>Since the ID header must appear first, a Kate stream can be recognized by comparing the first eight bytes of the first packet with the signature string "\200kate\0\0\0".</p>
<h2><a class="anchor" id="format-ogg-mapping">
Ogg mapping</a></h2>
<p>The first packet in a Kate stream (always packet type 0x80, the id header packet) must be placed on a separate page. The corresponding Ogg packet must be marked as beginning of stream (BOS). No other packet may be marked as BOS.</p>
<p>All subsequent header packets must be on one or more pages. Each data packet must be on a separate page.</p>
<p>The last data packet must be the end of stream packet (packet type 0x7f). The corresponding Ogg packet must be marked as end of stream (EOS). There can be only one end of stream packet in a Kate stream. No other packet may be marked as EOS.</p>
<p>As per the Ogg specification, granule positions must be non decreasing within the stream. Header packets have granule position 0.</p>
<h2><a class="anchor" id="format-detailed">
Detailed description</a></h2>
<p>Following is a detailed description of the format of each packet type.</p>
<p>Header packets:</p>
<ul>
<li><a class="el" href="format_0x80.html">0x80 (ID header)</a> </li>
<li><a class="el" href="format_0x81.html">0x81 (Vorbis comments)</a> </li>
<li><a class="el" href="format_0x82.html">0x82 (regions)</a> </li>
<li><a class="el" href="format_0x83.html">0x83 (styles)</a> </li>
<li><a class="el" href="format_0x84.html">0x84 (curves)</a> </li>
<li><a class="el" href="format_0x85.html">0x85 (motions)</a> </li>
<li><a class="el" href="format_0x86.html">0x86 (palettes)</a> </li>
<li><a class="el" href="format_0x87.html">0x87 (bitmaps)</a> </li>
<li><a class="el" href="format_0x88.html">0x88 (font ranges)</a></li>
</ul>
<p>Data packets:</p>
<ul>
<li><a class="el" href="format_0x00.html">0x00 (text packet)</a> </li>
<li><a class="el" href="format_0x01.html">0x01 (keepalive packet)</a> </li>
<li><a class="el" href="format_0x7f.html">0x7f (end packet)</a> </li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sun Aug 21 23:47:09 2011 for libkate by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.0 </small></address>
</body>
</html>
